# Lazy Evaluation (게으른 평가)


- 게으른 연산이다.
- 연산을 불필요한 연산을 피하기 위해 연산을 지연시키는 것을 말한다.
- 다시 말해 결과값이 필요할 때까지 계산을 늦추는 기법이다.
- 하지만 이런 방식을 쓰면 코드가 동작하기 위해 내부적으로 준비해주는 작업이 필요해서 무조건 효율적인 방식이라고 보기 어렵다.

- 이것의 반대가 eager (즉시) 이다.
- eager는 말 그대로 실행할 코드가 보이는 순간 곧바로 실행된다는 의미이다.
- 특정 작업의 실행 결과가 향후 필요하다는 점이 확실하다면 미리 실행 해 놓는 것이 기본적으로 성능 측면에서 좋다고 볼 수 있다.



### Stream 과 Lazy Evaluation
---

- 게으른 연산을 사용하는 대표적인 예가 stream 이다.


```java
public class Main {  
    public static void main(String[] args) {  
        List<Integer> list = new ArrayList<>();  
        for (int i = 0; i < 6; i++) {  
            list.add(i + 1);  //eager
        }  
  
        list.stream().filter(i -> i < 2)  
                .map(i -> i * 10).collect(Collectors.toList());  //Lazy
    }  
}
```

- stream를 사용하여 연산 과정을 보면 
- 이 코드의 진행 방식은 각 요소들이 차례대로
1. 2보다 작은지 검사
2. 각 요소를 10를 곱한다 
이 순서대로 동작을 한다.

이처럼 불필요한 연산 과정을 하지 않고 각 요소에 대해 동작을 한다.

우리가 흔히 하는 for 문으로 하는 연산 과정은 eager에 해당된다.


앞서 말한 것 처럼 항상 Lazy Evaluation이 처리 속도가 빠른것은 아니라서 테스트가 필요하지만 대부분의 경우에서는 LazyEvalution이 더욱 성능이 좋다.

하지만 성능이 대충 비슷할 때도 있다 그리고 굳이 코드가 복잡해져서 유지 보수가 어려워 질 가능성이 있어서 적절한 때에 사용해야한다.



### 어떨때 사용해야 할까??
---

1. 게으른 평가를 선택해야 하는 경우
	- 데이터 집합이 크고, 모든 데이터를 즉시 계산하거나 처리할 필요가 없는 경우 
	- 복잡한 계산 또는 데이터 변환 작업을 수행하며, 결과가 필요한 시점을 미리 예측하기 어려운 경우
	- 성능을 최적화하고 불필요한 계산을 피하려는 경우.

2. 이른 평가를 선택해야 하는 경우
	 -  결과가 즉시 필요한 경우, 예를 들어 사용자 요청에 실시간으로 응답해야 하는 웹 응용 프로그램의 경우
	 - 미리 계산된 결과를 캐싱하거나 저장하는 것이 적절하거나 효과적인 경우
	 - 복잡한 계산이나 데이터 처리를 피하고자 하는 경우
